/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package bitmap.transformer;

import java.io.IOException;
import java.nio.file.Path;
import java.nio.file.Paths;


public class App {
    public static void main(String[] args) throws IOException {
        // Make sure the user inputs the correct number of arguments
        if (args.length != 3) {
            throw new IllegalArgumentException("Usage: ./gradlew run --args \"input-file.bmp output-file.bmp transform\"");
        }

        Path inputPath = Paths.get(args[0]);
        Path outputPath = Paths.get(args[1]);
        String transform = args[2];

        Bitmap bitmap = new Bitmap(inputPath);
        switch (transform) {
            case "f":
                bitmap.flipHorizontally();
                break;
            case "g":
                bitmap.toGrayscale();
                break;
            case "i":
                bitmap.invertColors();
                break;
            default:
                throw new IllegalArgumentException("Unsupported transform. Available transforms:\n\"f\" to flip the image horizontally\n\"g\" to convert the image to grayscale\n\"i\" to invert the colors of hte image\n");
        }

        bitmap.save(outputPath);
        System.out.println("Transform success! Output saved to" + outputPath.toAbsolutePath());
    }
}
